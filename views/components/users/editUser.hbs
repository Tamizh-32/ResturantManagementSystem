<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
  <title>Edit User</title>
  
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  {{> sidebar}}
  <div class="container mb-3 col-lg-8 border border-effect">
     <div class="bg-secondary p-2 text-white">
       <h5>Edit User</h5>
    </div>
  <div class="container mt-2 mb-2">
    <form action="/users/{{user._id}}?_method=PUT" method="POST">
      <div class="mb-2">
        <label for="group" class="form-label">Group</label>
        <select name="group" class="form-control" required>
            <option value="cheff" {{#if (eq user.group 'cheff')}}selected{{/if}}>Cheff</option>
            <option value="server" {{#if (eq user.group 'server')}}selected{{/if}}>Server</option>
            <option value="manager" {{#if (eq user.group 'manager')}}selected{{/if}}>Manager</option>
            <option value="cashier" {{#if (eq user.group 'cashier')}}selected{{/if}}>Cashier</option>
            <option value="admin" {{#if (eq user.group 'admin')}}selected{{/if}}>Admin</option>
        </select>
      </div>
      <div class="mb-2">
        <label for="storeId" class="form-label">Store</label>
        <select name="storeId" class="form-control" required>
          {{#each stores}}
            <option value="{{this._id}}" {{#if (eq this._id ../user.storeId)}}selected{{/if}}>{{this.storeName}}</option>
          {{/each}}
        </select>
      </div>
      <div class="row mb-2">
        <div class="col-md-6">
          <label for="userName" class="form-label">User Name</label>
          <input type="text" name="userName" class="form-control" value="{{user.userName}}" required>
        </div>
        <div class="col-md-6">
          <label for="email" class="form-label">Email</label>
          <input type="email" name="email" class="form-control" value="{{user.email}}" required>
        </div>
      </div>
      <div class="row mb-2">
        <div class="col-md-6">
          <label for="password" class="form-label">Password</label>
          <input type="password" name="password" class="form-control"  value="{{user.password}}" required>
        </div>
        <div class="col-md-6">
          <label for="confirmPassword" class="form-label">Confirm Password</label>
          <input type="password" name="confirmPassword" class="form-control"  value="{{user.confirmPassword}}" required>
        </div>
      </div>
      <div class="row mb-2">
        <div class="col-md-6">
          <label for="firstName" class="form-label">First Name</label>
          <input type="text" name="firstName" class="form-control" value="{{user.firstName}}" required>
        </div>
        <div class="col-md-6">
          <label for="lastName" class="form-label">Last Name</label>
          <input type="text" name="lastName" class="form-control" value="{{user.lastName}}" required>
        </div>
      </div>
      <div class="row mb-2">
        <div class="col-md-6">
          <label for="phone" class="form-label">Phone</label>
          <input type="number" name="phone" class="form-control" value="{{user.phone}}" required>
        </div>
        <div class="col-md-6">
          <label for="gender" class="form-label">Gender</label>
          <select name="gender" class="form-control" required>
            <option value="Male" {{#if (eq user.gender 'Male')}}selected{{/if}}>Male</option>
            <option value="Female" {{#if (eq user.gender 'Female')}}selected{{/if}}>Female</option>
          </select>
        </div>
      </div>
      <br>
      <button type="submit" class="btn btn-success">Save</button>
      <a href="/users" class="btn btn-secondary">Cancel</a>
    </form>
  </div>
  </div>

<script>
 // Password and confirm Password Validation
  document.querySelector('form').addEventListener('submit', function (e) {
    const password = document.querySelector('input[name="password"]').value;
    const confirmPassword = document.querySelector('input[name="confirmPassword"]').value;

    if (password !== confirmPassword) {
      e.preventDefault(); // Prevent form submission
      alert('Password and Confirm Password do not match!');
    }
  });
</script>

</body>
</html>
